# Fitness API (Node + Express + SQLite)

A backend API for logging workouts and retrieving workout history.

This project was built to practice backend fundamentals:
- REST API design
- SQL and relational data modeling
- Validation and error handling
- Connecting Postman to an Express server and SQLite database

There is intentionally no frontend. All interaction happens through Postman.

---

## Tech Stack

- Node.js
- Express
- SQLite (better-sqlite3)
- Postman
- DB Browser for SQLite

---

## Project Overview

This API allows workouts to be logged manually and stored in a relational database.

The data model supports:
- Strength and cardio workouts
- Optional cardio-specific metrics
- Partial updates (only change what is needed)
- Safe deletion with cascading behavior

This mirrors real-world backend patterns where not all data applies to every record.

---

## Data Model

### workout_sessions
Stores one row per workout.

Fields:
- id (primary key)
- workout_date
- workout_type
- duration_minutes
- active_calories
- notes (optional)

### activity_details
Stores optional cardio-related metrics.

Fields:
- id
- workout_id (foreign key, UNIQUE)
- distance_miles (nullable)
- calories_segment (nullable)

Each workout may have zero or one activity details row.

---

## Local Setup

1. Install dependencies:
   npm install

2. Start the server:
   node server.js

Server runs at:
http://localhost:3000

---

## Postman Endpoint Cheat Sheet

Use this order when returning to the project:

- GET /health  
  Confirm server is running

- POST /workouts  
  Create a workout (strength or cardio)

- GET /workouts  
  View all workouts

- GET /workouts/latest  
  Get the most recently created workout

- GET /workouts/:id  
  View a specific workout

- PUT /workouts/:id  
  Update one or more fields

- DELETE /workouts/:id  
  Delete a workout and related details

---

## API Endpoints

### GET /health

Response:
{ "ok": true, "message": "Server is running" }

---

### POST /workouts

Required fields:
- workout_date
- workout_type
- duration_minutes
- active_calories

Optional fields:
- notes
- distance_miles
- calories_segment

Strength / non-cardio example:
{
  "workout_date": "2025-01-10",
  "workout_type": "strength training",
  "duration_minutes": 75,
  "active_calories": 320,
  "notes": "Upper body lift"
}

Cardio example:
{
  "workout_date": "2025-01-10",
  "workout_type": "running",
  "duration_minutes": 45,
  "active_calories": 410,
  "notes": "Morning run",
  "distance_miles": 3.1,
  "calories_segment": 390
}

Response:
{
  "message": "Workout saved",
  "id": 1,
  "details_created": true
}

---

### GET /workouts

Returns all workouts. Cardio metrics may be null if not applicable.

---

### GET /workouts/:id

Returns a single workout by id.

Example:
GET /workouts/3

---

### GET /workouts/latest

Returns the most recently created workout.

---

### PUT /workouts/:id

Partial update. Send only the fields you want to change.

Example:
{
  "duration_minutes": 60,
  "notes": "Updated notes"
}

---

### DELETE /workouts/:id

Deletes the workout and any associated activity details.

---

## Notes

- The SQLite database file (fitness.db) is local and ignored by git via .gitignore
- IDs are auto-generated by SQLite
- Cardio details are inserted automatically only when applicable
